(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0fd9":function(t,e,i){"use strict";i("99af"),i("4160"),i("caad"),i("13d5"),i("4ec9"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("5319"),i("159b"),i("ddb0");var a=i("ade3"),r=i("5530"),n=(i("4b85"),i("2b0e")),s=i("d9f7"),o=i("80d2"),h=["sm","md","lg","xl"],l=["start","end","center"];function u(t,e){return h.reduce((function(i,a){return i[t+Object(o["y"])(a)]=e(),i}),{})}var c=function(t){return[].concat(l,["baseline","stretch"]).includes(t)},d=u("align",(function(){return{type:String,default:null,validator:c}})),p=function(t){return[].concat(l,["space-between","space-around"]).includes(t)},f=u("justify",(function(){return{type:String,default:null,validator:p}})),y=function(t){return[].concat(l,["space-between","space-around","stretch"]).includes(t)},v=u("alignContent",(function(){return{type:String,default:null,validator:y}})),g={align:Object.keys(d),justify:Object.keys(f),alignContent:Object.keys(v)},m={align:"align",justify:"justify",alignContent:"align-content"};function b(t,e,i){var a=m[t];if(null!=i){if(e){var r=e.replace(t,"");a+="-".concat(r)}return a+="-".concat(i),a.toLowerCase()}}var _=new Map;e["a"]=n["default"].extend({name:"v-row",functional:!0,props:Object(r["a"])(Object(r["a"])(Object(r["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c}},d),{},{justify:{type:String,default:null,validator:p}},f),{},{alignContent:{type:String,default:null,validator:y}},v),render:function(t,e){var i=e.props,r=e.data,n=e.children,o="";for(var h in i)o+=String(i[h]);var l=_.get(o);return l||function(){var t,e;for(e in l=[],g)g[e].forEach((function(t){var a=i[t],r=b(e,t,a);r&&l.push(r)}));l.push((t={"no-gutters":i.noGutters,"row--dense":i.dense},Object(a["a"])(t,"align-".concat(i.align),i.align),Object(a["a"])(t,"justify-".concat(i.justify),i.justify),Object(a["a"])(t,"align-content-".concat(i.alignContent),i.alignContent),t)),_.set(o,l)}(),t(i.tag,Object(s["a"])(r,{staticClass:"row",class:l}),n)}})},7350:function(t,e,i){},"7fa3":function(t,e,i){"use strict";var a=i("7350"),r=i.n(a);r.a},a55b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"login"}},[i("v-container",{attrs:{fluid:""}},[i("v-row",{attrs:{"justify-center":""}},[i("v-col",{staticClass:"mt-16 d-flex flex-column align-center position-relative",attrs:{"align-center":"",cols:"12"}},[i("p",{staticClass:"text-h4 text-md-h3 text-xl-h2 text-center"},[t._v("Hey, welcome back!")])]),i("v-col",{staticClass:"mt-2 d-flex flex-column align-center position-relative",attrs:{"align-center":"",cols:"12"}},[i("span",{staticClass:"text-center text-lg-h6 text-md-left abovebg"},[t._v("Apply to be a member?"),i("span",{staticClass:"ml-2 text-decoration-underline red--text text--darken-4 abovebg",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.push("/apply")}}},[t._v("Apply")])]),i("v-col",{staticClass:"mt-6 d-flex flex-column align-stretch",attrs:{cols:"12",sm:"4",lg:"3"}},[i("form",{staticClass:"justify-center abovebg"},[i("v-text-field",{attrs:{"prepend-icon":"person",label:"Account","label-for":"input-account",description:"Your account must be 4-20 characters","invalid-feedback":"Your account is invalid. Please try again.",type:"text",state:t.state("account"),id:"account"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),i("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password","label-for":"input-password",description:"Your password must be 4-20 characters","invalid-feedback":"Your password is invalid. Please try again.",type:"password",state:t.state("password"),id:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("v-btn",{attrs:{block:"",dark:"",color:"red darken-4"},on:{click:t.submit}},[t._v("LOG IN")]),i("br"),i("p",{staticClass:"white red--text text--darken-4"},[t._v(t._s(t.error.message))]),i("span",{staticClass:"mt-4 text-decoration-underline grey--text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.push("/password")}}},[t._v("Forgot your password?")]),i("br")],1)])],1)],1)],1),i("div",{attrs:{id:"loginbg"}},[i("vue-particles",{attrs:{color:"#B71C1C"}})],1)],1)},r=[],n=i("d1cb"),s=i.n(n),o=i("b4e7"),h=i.n(o),l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),c=function(){function t(){l(this,t),this.list=[]}return u(t,[{key:"add",value:function(t){this.list.push(t)}},{key:"map",value:function(t){for(var e=0;e<this.list.length;e++){var i=this.list[e];t(i)}}},{key:"findByNode",value:function(t){for(var e=0;e<this.list.length;e++){var i=this.list[e];if(i["node"]===t)return i}return null}},{key:"removeByNode",value:function(t){for(var e=0;e<this.list.length;e++){var i=this.list[e];if(i["node"]===t){this.list.splice(e,1);break}}}},{key:"removeByEmitter",value:function(t){for(var e=0;e<this.list.length;e++){var i=this.list[e];if(i["emitter"]===t){this.list.splice(e,1);break}}}},{key:"destroy",value:function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];for(var i in e)delete e[i]}this.list.length=0}}]),t}(),d=void 0,p=void 0,f=new c,y={container:null,make:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof t&&(t=document.querySelector(t)),d||(d=k()),p||(p=new s.a,p.addRenderer(g(d,e)),h.a.add(m));var i=v(t,e);return p.addEmitter(i),b(t),f.add({emitter:i,node:t,config:e}),this},close:function(t){"string"===typeof t&&(t=document.querySelector(t));var e=f.findByNode(t),i=e.emitter;return p.removeEmitter(i),f.removeByNode(t),_(t),this},destroy:function(){try{f.map((function(t){var e=t.node;return _(e)})),f.destroy(),h.a.remove(m),p.destroy()}catch(t){}return this}},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new s.a.Emitter;i.rate=e.num?new s.a.Rate(s.a.getSpan(Math.floor(.7*e.num),e.num),.1):new s.a.Rate(s.a.getSpan(6,8),.1);var a=e.life?new s.a.Life(e.life):new s.a.Life(.5,1.2),r=e.color||E(t),n=e.tha?new s.a.Span(e.tha[0],e.tha[1]):new s.a.Span(-30,30),o=e.v?new s.a.Span(.8*e.v,e.v):new s.a.Span(.6,1.2);if(e.alpha?Array.isArray(e.alpha)?i.addBehaviour(new s.a.Alpha(e.alpha[0],e.alpha[1])):i.addBehaviour(new s.a.Alpha(e.alpha)):i.addBehaviour(new s.a.Alpha(s.a.getSpan(.6,.9))),e.radius){var h=e.radius,l=new s.a.Radius(.5*h,h);i.addInitialize(l)}else{var u=new s.a.Radius(1,2);i.addInitialize(u)}var c=e.g||2.5;return e.random&&i.addBehaviour(new s.a.RandomDrift(e.random,e.random,.2)),i.addInitialize(new s.a.Mass(1)),i.addInitialize(a),i.addInitialize(new s.a.Velocity(o,n,"polar")),i.addBehaviour(new s.a.Color(r)),i.addBehaviour(new s.a.Scale(1,.5)),i.addBehaviour(new s.a.G(parseFloat(c))),i},g=function(t,e){var i=new s.a.DomRenderer(t);return i.onParticleCreated=function(t){var e=i.pool.get(i.circleConf,t);e.style.width=2*t.radius+"px",e.style.height=2*t.radius+"px",e.style.marginLeft=-t.radius+"px",e.style.marginTop=-t.radius+"px",e.style.borderRadius=0,i.element.appendChild(e),t.body=e},i},m=function(){p&&p.update()},b=function(t){t.addEventListener("input",x,!1)},_=function(t){try{t.removeEventListener("input",x,!1),t.onpropertychange=null}catch(e){}},x=function(t){var e=f.findByNode(t.currentTarget||t.target),i=e.emitter,a=e.config,r=T(t);i.p.x=r.x,i.p.y=r.y+(a.height||a.y||0),i.emit("once")},k=function(){var t=document.createElement("div");return t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.style.zIndex=9999,t.pointerEvents="none",t.id="powerinput_"+(999999*Math.random()>>0),document.body.appendChild(t),t},E=function(t){var e=t.style.color;if(e&&"inherit"!==e);else{var i=getComputedStyle(t);e=i["color"],e&&"inherit"!==e||(e="#000000")}return 0===e.indexOf("rgb")&&(e=P(e)),e},P=function(t){var e=t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),i=+e[0],a=+e[1],r=+e[2];return"#"+((1<<24)+(i<<16)+(a<<8)+r).toString(16).slice(1)},w=function(t,e){var i=document.createElement("div");i.style.position="absolute",i.style.zIndex=-99,i.style.visibility="hidden";var a=document.createElement("div"),r=getComputedStyle(t),n=!0,s=!1,o=void 0;try{for(var h,l=r[Symbol.iterator]();!(n=(h=l.next()).done);n=!0){var u=h.value;a.style[u]=r[u]}}catch(m){s=!0,o=m}finally{try{!n&&l.return&&l.return()}finally{if(s)throw o}}var c=".",d="INPUT"===t.tagName?t.value.replace(/ /g,c):t.value,p=d.substr(0,e);a.textContent=p,"TEXTAREA"===t.tagName&&(a.style.height="auto"),"INPUT"===t.tagName&&(a.style.width="auto");var f=document.createElement("span");f.textContent=d.substr(e)||".",f.style.backgroundColor="#ff0000",a.appendChild(f),i.appendChild(a),document.body.appendChild(i);var y=f.offsetLeft,v=f.offsetTop,g=A(t);return document.body.removeChild(i),{x:g.x+y,y:g.y+v}},A=function(t){var e=0,i=0;while(t)e+=t.offsetLeft-t.scrollLeft+t.clientLeft,i+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;return{x:e,y:i}},T=function(t){var e=t.currentTarget,i=R(e),a=i.end;return w(e,a)},R=function(t){var e=0,i=0,a=void 0,r=void 0,n=void 0,s=void 0,o=void 0;return"number"===typeof t.selectionStart&&"number"===typeof t.selectionEnd?(e=t.selectionStart,i=t.selectionEnd):document.selection?(r=document.selection.createRange(),r&&r.parentElement()==t&&(s=t.value.length,a=t.value.replace(/\r\n/g,"\n"),n=t.createTextRange(),n.moveToBookmark(r.getBookmark()),o=t.createTextRange(),o.collapse(!1),n.compareEndPoints("StartToEnd",o)>-1?e=i=s:(e=-n.moveStart("character",-s),e+=a.slice(0,e).split("\n").length-1,n.compareEndPoints("EndToEnd",o)>-1?i=s:(i=-n.moveEnd("character",-s),i+=a.slice(0,i).split("\n").length-1)))):e=i=t.value.length,{start:e,end:i}},O=y,C={name:"login",data:function(){return{account:"",password:""}},computed:{error:{get:function(){return this.$store.getters.error},set:function(t){this.$store.commit("error",t)}}},mounted:function(){O.make("#account",{height:5,tha:[0,360],g:.5,num:5,radius:6,circle:!0,alpha:[.75,.1],color:"random"}),O.make("#password",{height:5,tha:[0,360],g:.5,num:5,radius:6,circle:!0,alpha:[.75,.1],color:"random"})},methods:{state:function(t){return"account"===t?!(this.account.length<4||this.account.length>20):"password"===t?!(this.password.length<4||this.password.length>20):void 0},submit:function(t){var e=this;t.preventDefault(),this.account.length<4||this.account.length>20?(this.error.show=!0,this.error.message="Account format does not match"):(this.password.length<4||this.password.length>20)&&(this.error.show=!0,this.error.message="Password format does not match"),this.axios.post("https://hellotherecommunity.herokuapp.com/login",{account:this.account,password:this.password}).then((function(t){var i=t.data;i.success?(e.error.show=!1,e.error.message="",e.$store.commit("login",e.account),e.$router.push("/home")):(e.error.show=!0,e.error.message=i.message)})).catch((function(t){e.error.show=!0,e.error.message=t.response.data.message}))}}},S=C,I=(i("7fa3"),i("2877")),B=i("6544"),V=i.n(B),M=i("8336"),D=i("62ad"),L=i("a523"),F=i("0fd9"),U=i("8654"),j=Object(I["a"])(S,a,r,!1,null,null,null);e["default"]=j.exports;V()(j,{VBtn:M["a"],VCol:D["a"],VContainer:L["a"],VRow:F["a"],VTextField:U["a"]})},b4e7:function(t,e,i){
/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(e,i){t.exports=i()}(0,(function(){"use strict";return function(){for(var t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i={callback:t,fps:e,n:60/e,param:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i:0};return this.animations.push(i),this.animations.length>=1&&this.start(),this},getIndex:function(t){for(var e=0;e<this.animations.length;e++)if(this.animations[e].callback===t)return e;return-1},remove:function(t){if(!(this.getIndex(t)<0))return this.deleteMap(t),0===this.animations.length&&this.stop(),this},deleteMap:function(t){var e=this.getIndex(t),i=this.animations[e];for(var a in i)delete i[a];this.animations.splice(e,1)},start:function(){if("start"!==this.state)return this.state="start",this.tick(),this},stop:function(){if("stop"!==this.state)return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var t=this;this.timer=requestAnimationFrame((function(){t.tick()}));for(var e=0;e<this.animations.length;e++){var i=this.animations[e],a=i.callback,r=i.param;i.i++,i.i>=i.n&&(a(r),i.i=0)}}}}))},d1cb:function(t,e,i){
/*!
* Proton v4.1.5
* https://github.com/drawcall/Proton
*
* Copyright 2013-2019, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e=3.1415926,i={PI:e,PIx2:2*e,PI_2:e/2,PI_180:e/180,N180_PI:180/e,Infinity:-999,isInfinity:function(t){return t===this.Infinity||t===1/0},randomAToB:function(t,e,i){return 2<arguments.length&&void 0!==i&&i?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,i){return this.randomAToB(t-e,t+e,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(t,e){var i=1<arguments.length&&void 0!==e?e:4,a=Math.pow(10,i);return Math.floor(t*a)/a},degreeTransform:function(t){return t*e/180},toColor16:function(t){return"#"+t.toString(16)}},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:s(r,e,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=(r(u,[{key:"getValue",value:function(t){var e=0<arguments.length&&void 0!==t&&t;return this.isArray?E.getRandFromArray(this.a):this.center?i.randomFloating(this.a,this.b,e):i.randomAToB(this.a,this.b,e)}}],[{key:"setSpanValue",value:function(t,e,i){return t instanceof u?t:void 0===e?new u(t):void 0===i?new u(t,e):new u(t,e,i)}},{key:"getSpanValue",value:function(t){return t instanceof u?t.getValue():t}}]),u);function u(e,i,a){t(this,u),E.isArray(e)?(this.isArray=!0,this.a=e):(this.isArray=!1,this.a=E.initValue(e,1),this.b=E.initValue(i,this.a),this.center=E.initValue(a,!1))}var c=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},d=function(t,e){return[1,0,0,0,1,0,t,e,1]},p=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},f=function(t,e){return[t,0,0,0,e,0,0,0,1]},y=function(t,e){var i=t[0],a=t[1],r=t[2],n=t[3],s=t[4],o=t[5],h=t[6],l=t[7],u=t[8],c=e[0],d=e[1],p=e[2],f=e[3],y=e[4],v=e[5],g=e[6],m=e[7],b=e[8];return[i*c+a*f+r*g,i*d+a*y+r*m,i*p+a*v+r*b,n*c+s*f+o*g,n*d+s*y+o*m,n*p+s*v+o*b,h*c+l*f+u*g,h*d+l*y+u*m,h*p+l*v+u*b]},v={createCanvas:function(t,e,i,a){var r=3<arguments.length&&void 0!==a?a:"absolute",n=document.createElement("canvas");return n.id=t,n.width=e,n.height=i,n.style.opacity=0,n.style.position=r,this.transform(n,-500,-500,0,0),n},createDiv:function(t,e,i){var a=document.createElement("div");return a.id=t,a.style.position="absolute",this.resize(a,e,i),a},resize:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px",t.style.marginLeft=-e/2+"px",t.style.marginTop=-i/2+"px"},transform:function(t,e,i,a,r){t.style.willChange="transform";var n="translate("+e+"px, "+i+"px) scale("+a+") rotate("+r+"deg)";this.css3(t,"transform",n)},transform3d:function(t,e,i,a,r){t.style.willChange="transform";var n="translate3d("+e+"px, "+i+"px, 0) scale("+a+") rotate("+r+"deg)";this.css3(t,"backfaceVisibility","hidden"),this.css3(t,"transform",n)},css3:function(t,e,i){var a=e.charAt(0).toUpperCase()+e.substr(1);t.style["Webkit"+a]=i,t.style["Moz"+a]=i,t.style["O"+a]=i,t.style["ms"+a]=i,t.style[""+e]=i}},g={},m={},b=0,_=function(t,e,i){t.drawImage(e,i.x,i.y);var a=t.getImageData(i.x,i.y,i.width,i.height);return t.clearRect(i.x,i.y,i.width,i.height),a},x=function(t,e,i){var a="string"==typeof t?t:t.src;if(g[a])e(g[a],i);else{var r=new Image;r.onload=function(t){g[a]=t.target,e(g[a],i)},r.src=a}},k=function(t,e,i){var a=t.src;if(!m[a]){var r=c(t.width),n=c(t.height),s=v.createCanvas("proton_canvas_cache_"+ ++b,r,n);s.getContext("2d").drawImage(t,0,0,t.width,t.height),m[a]=s}return e&&e(m[a],i),m[a]},E={initValue:function(t,e){return null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyArray:function(t){t&&(t.length=0)},toArray:function(t){return this.isArray(t)?t:[t]},getRandFromArray:function(t){return t?t[Math.floor(t.length*Math.random())]:null},emptyObject:function(t,e){var i=1<arguments.length&&void 0!==e?e:null;for(var a in t)i&&-1<i.indexOf(a)||delete t[a]},classApply:function(t,e){var i=1<arguments.length&&void 0!==e?e:null;return i?new(t.bind.apply(t,[null].concat(i))):new t},setVectorVal:function(t,e){var i=1<arguments.length&&void 0!==e?e:null;i&&(this.hasProp(i,"x")&&(t.p.x=i.x),this.hasProp(i,"y")&&(t.p.y=i.y),this.hasProp(i,"vx")&&(t.v.x=i.vx),this.hasProp(i,"vy")&&(t.v.y=i.vy),this.hasProp(i,"ax")&&(t.a.x=i.ax),this.hasProp(i,"ay")&&(t.a.y=i.ay),this.hasProp(i,"p")&&t.p.copy(i.p),this.hasProp(i,"v")&&t.v.copy(i.v),this.hasProp(i,"a")&&t.a.copy(i.a),this.hasProp(i,"position")&&t.p.copy(i.position),this.hasProp(i,"velocity")&&t.v.copy(i.velocity),this.hasProp(i,"accelerate")&&t.a.copy(i.accelerate))},hasProp:function(t,e){return!!t&&void 0!==t[e]},setProp:function(t,e){for(var i in e)t.hasOwnProperty(i)&&(t[i]=l.getSpanValue(e[i]));return t},getImageData:function(t,e,i){return _(t,e,i)},destroyAll:function(t,e){for(var i=1<arguments.length&&void 0!==e?e:null,a=t.length;a--;){try{t[a].destroy(i)}catch(t){}delete t[a]}t.length=0},assign:function(t,e){if("function"==typeof Object.assign)return Object.assign(t,e);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}},P={},w={_index:0,_cache:{},id:function(t){return void 0!==P[t]&&null!==P[t]||(P[t]=0),t+"_"+P[t]++},getId:function(t){var e=this.getIdFromCache(t);return e||(e="PUID_"+this._index++,this._cache[e]=t,e)},getIdFromCache:function(t){var e=void 0,i=void 0;for(i in this._cache){if((e=this._cache[i])===t)return i;if(this.isBody(e,t)&&e.src===t.src)return i}return null},isBody:function(t,e){return"object"===(void 0===t?"undefined":a(t))&&"object"===(void 0===e?"undefined":a(e))&&t.isInner&&e.isInner},getTarget:function(t){return this._cache[t]}},A=(r(T,[{key:"get",value:function(t,e,i){var a=void 0;return i=i||t.__puid||w.getId(t),(a=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(t,e)).__puid=t.__puid||i,a}},{key:"expire",value:function(t){return this.getCache(t.__puid).push(t)}},{key:"createOrClone",value:function(t,e){return this.total++,this.create?this.create(t,e):"function"==typeof t?E.classApply(t,e):t.clone()}},{key:"getCount",value:function(){var t=0;for(var e in this.cache)t+=this.cache[e].length;return t++}},{key:"destroy",value:function(){for(var t in this.cache)this.cache[t].length=0,delete this.cache[t]}},{key:"getCache",value:function(t){var e=0<arguments.length&&void 0!==t?t:"default";return this.cache[e]||(this.cache[e]=[]),this.cache[e]}}]),T);function T(e){t(this,T),this.total=0,this.cache={}}var R=(r(O,[{key:"update",value:function(t,e){this.add(t,e);var i=this.getEmitter(),a=this.getRenderer(),r="";switch(this.type){case 2:r+="emitter:"+this.proton.emitters.length+"<br>",i&&(r+="em speed:"+i.emitSpeed+"<br>"),i&&(r+="pos:"+this.getEmitterPos(i));break;case 3:i&&(r+="initializes:"+i.initializes.length+"<br>"),i&&(r+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(r+="behaviours:"+i.behaviours.length+"<br>"),i&&(r+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:a&&(r+=a.name+"<br>"),a&&(r+="body:"+this.getCreatedNumber(a)+"<br>");break;default:r+="particles:"+this.proton.getCount()+"<br>",r+="pool:"+this.proton.pool.getCount()+"<br>",r+="total:"+this.proton.pool.total}this.container.innerHTML=r}},{key:"add",value:function(t,e){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",(function(t){i.type++,4<i.type&&(i.type=1)}),!1);var a=void 0,r=void 0;switch(t){case 2:a="#201",r="#f08";break;case 3:a="#020",r="#0f0";break;default:a="#002",r="#0ff"}this.container.style["background-color"]=a,this.container.style.color=r}this.container.parentNode||(e=e||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(t){var e="";if(!t||!t.length)return e;for(var i=0;i<t.length;i++)e+=(t[i].name||"").substr(0,1)+".";return e}},{key:"getCreatedNumber",value:function(t){return t.pool.total||t.cpool&&t.cpool.total||0}},{key:"getEmitterPos",value:function(t){return Math.round(t.p.x)+","+Math.round(t.p.y)}}]),O);function O(e){t(this,O),this.proton=e,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var C=(r(S,[{key:"addEventListener",value:function(t,e){return this._listeners?this.removeEventListener(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),e}},{key:"removeEventListener",value:function(t,e){if(this._listeners&&this._listeners[t])for(var i=this._listeners[t],a=i.length,r=0;r<a;r++)if(i[r]===e){1===a?delete this._listeners[t]:i.splice(r,1);break}}},{key:"removeAllEventListeners",value:function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null}},{key:"dispatchEvent",value:function(t,e){var i=!1,a=this._listeners;if(t&&a){var r=a[t];if(!r)return i;for(var n=void 0,s=r.length;s--;)n=r[s],i=i||n(e)}return!!i}},{key:"hasEventListener",value:function(t){var e=this._listeners;return!(!e||!e[t])}}],[{key:"bind",value:function(t){t.prototype.dispatchEvent=S.prototype.dispatchEvent,t.prototype.hasEventListener=S.prototype.hasEventListener,t.prototype.addEventListener=S.prototype.addEventListener,t.prototype.removeEventListener=S.prototype.removeEventListener,t.prototype.removeAllEventListeners=S.prototype.removeAllEventListeners}}]),S);function S(){t(this,S),this._listeners=null}var I=(r(B,[{key:"calculate",value:function(t,e,i){this.eulerIntegrate(t,e,i)}},{key:"eulerIntegrate",value:function(t,e,i){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),i&&t.v.multiplyScalar(i),t.a.clear())}}]),B);function B(e){t(this,B),this.type=e}var V=(r(M,[{key:"addRenderer",value:function(t){t.init(this),this.renderers.push(t)}},{key:"removeRenderer",value:function(t){var e=this.renderers.indexOf(t);this.renderers.splice(e,1),t.remove(this)}},{key:"addEmitter",value:function(t){this.emitters.push(t),(t.parent=this).dispatchEvent(M.EMITTER_ADDED,t)}},{key:"removeEmitter",value:function(t){var e=this.emitters.indexOf(t);this.emitters.splice(e,1),t.parent=null,this.dispatchEvent(M.EMITTER_REMOVED,t)}},{key:"update",value:function(){"auto"===this._fps?(this.dispatchEvent(M.PROTON_UPDATE),M.USE_CLOCK?(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(M.DEFAULT_INTERVAL),this.dispatchEvent(M.PROTON_UPDATE_AFTER)):(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(M.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(M.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(t){for(var e=this.emitters.length;e--;)this.emitters[e].update(t)}},{key:"amendChangeTabsBug",value:function(){M.amendChangeTabsBug&&.5<this.elapsed&&(this.then=(new Date).getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var t=0,e=this.emitters.length;e--;)t+=this.emitters[e].particles.length;return t}},{key:"getAllParticles",value:function(){for(var t=[],e=this.emitters.length;e--;)t=t.concat(this.emitters[e].particles);return t}},{key:"destroyAllEmitters",value:function(){E.destroyAll(this.emitters)}},{key:"destroy",value:function(t){function e(){i.time=0,i.then=0,i.pool.destroy(),E.destroyAll(i.emitters),E.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&void 0!==t&&t?setTimeout(e,200):e()}},{key:"fps",set:function(t){this._fps=t,this._interval="auto"===t?M.DEFAULT_INTERVAL:i.floor(1/t,7)},get:function(){return this._fps}}]),M);function M(e){t(this,M),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new R(this),this.pool=new A(80),this.integrationType=E.initValue(e,M.EULER),this.integrator=new I(this.integrationType),this._fps="auto",this._interval=M.DEFAULT_INTERVAL}V.USE_CLOCK=!1,V.MEASURE=100,V.EULER="euler",V.RK2="runge-kutta2",V.PARTICLE_CREATED="PARTICLE_CREATED",V.PARTICLE_UPDATE="PARTICLE_UPDATE",V.PARTICLE_SLEEP="PARTICLE_SLEEP",V.PARTICLE_DEAD="PARTICLE_DEAD",V.EMITTER_ADDED="EMITTER_ADDED",V.EMITTER_REMOVED="EMITTER_REMOVED",V.PROTON_UPDATE="PROTON_UPDATE",V.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",V.DEFAULT_INTERVAL=.0167,V.amendChangeTabsBug=!0,C.bind(V);var D=(r(L,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),L);function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255;t(this,L),this.r=e,this.g=i,this.b=a}var F={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*i.PI_2)},easeOutSine:function(t){return Math.sin(t*i.PI_2)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},getEasing:function(t){return"function"==typeof t?t:this[t]||this.easeLinear}},U=(r(j,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getGradient",value:function(){return 0!==this.x?Math.atan2(this.y,this.x):0<this.y?i.PI_2:this.y<0?-i.PI_2:void 0}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addXY",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"divideScalar",value:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)+i*Math.sin(t),this.y=-e*Math.sin(t)+i*Math.cos(t),this}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new j(this.x,this.y)}}]),j);function j(e,i){t(this,j),this.x=e||0,this.y=i||0}var z=(r(N,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*i.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=F.easeLinear,this.rgb.reset(),E.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(t,e){if(this.sleep||(this.age+=t,this.applyBehaviours(t,e)),this.age<this.life){var i=this.easing(this.age/this.life);this.energy=Math.max(1-i,0)}else this.destroy()}},{key:"applyBehaviours",value:function(t,e){var i=this.behaviours.length,a=void 0;for(a=0;a<i;a++)this.behaviours[a]&&this.behaviours[a].applyBehaviour(this,t,e)}},{key:"addBehaviour",value:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)}},{key:"addBehaviours",value:function(t){var e=t.length,i=void 0;for(i=0;i<e;i++)this.addBehaviour(t[i])}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);-1<e&&(this.behaviours.splice(e,1).parents=null)}},{key:"removeAllBehaviours",value:function(){E.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),N);function N(e){t(this,N),this.name="Particle",this.id=w.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new U,this.v=new U,this.a=new U,this.old.p=new U,this.old.v=new U,this.old.a=new U,this.rgb=new D,this.reset(),e&&E.setProp(this,e)}var H={hexToRgb:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t;return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"},getHex16FromParticle:function(t){return 65536*Number(t.rgb.r)+256*Number(t.rgb.g)+Number(t.rgb.b)}},q=(r(G,[{key:"set",value:function(t,e){return this.r=t,this.tha=e,this}},{key:"setR",value:function(t){return this.r=t,this}},{key:"setTha",value:function(t){return this.tha=t,this}},{key:"copy",value:function(t){return this.r=t.r,this.tha=t.tha,this}},{key:"toVector",value:function(){return new U(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(t){return t.r===this.r&&t.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new G(this.r,this.tha)}}]),G);function G(e,i){t(this,G),this.r=Math.abs(e)||0,this.tha=i||0}var Y={create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var i=0;i<9;i++)e[i]=t[i];return e},multiply:function(t,e,i){var a=t[0],r=t[1],n=t[2],s=t[3],o=t[4],h=t[6],l=t[7],u=e[0],c=e[1],d=e[2],p=e[3],f=e[4],y=e[6],v=e[7];return i[0]=u*a+c*s,i[1]=u*r+c*o,i[2]=n*d,i[3]=p*a+f*s,i[4]=p*r+f*o,i[6]=y*a+v*s+h,i[7]=y*r+v*o+l,i},inverse:function(t,e){var i,a=t[0],r=t[1],n=t[3],s=t[4],o=t[6],h=t[7],l=s,u=-n,c=h*n-s*o;return i=1/(a*l+r*u),e[0]=l*i,e[1]=-r*i,e[3]=u*i,e[4]=a*i,e[6]=c*i,e[7]=(-h*a+r*o)*i,e},multiplyVec2:function(t,e,i){var a=e[0],r=e[1];return i[0]=a*t[0]+r*t[3]+t[6],i[1]=a*t[1]+r*t[4]+t[7],i}},X=(o(W,l),r(W,[{key:"getValue",value:function(){var t=E.getRandFromArray(this._arr);return"random"===t||"Random"===t?i.randomColor():t}}],[{key:"createArraySpan",value:function(t){return t?t instanceof W?t:new W(t):null}}]),W);function W(e){t(this,W);var i=h(this,(W.__proto__||Object.getPrototypeOf(W)).call(this));return i._arr=E.toArray(e),i}var Z=(r($,[{key:"contains",value:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}}]),$);function $(e,i,a,r){t(this,$),this.x=e,this.y=i,this.width=a,this.height=r,this.bottom=this.y+this.height,this.right=this.x+this.width}var Q=(r(K,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1===this.numPan.b?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),K);function K(e,i){t(this,K),this.numPan=l.setSpanValue(E.initValue(e,1)),this.timePan=l.setSpanValue(E.initValue(i,1)),this.startTime=0,this.nextTime=0,this.init()}var J=(r(tt,[{key:"reset",value:function(){}},{key:"init",value:function(t,e){e?this.initialize(e):this.initialize(t)}},{key:"initialize",value:function(){}}]),tt);function tt(){t(this,tt)}var et=(o(it,J),r(it,[{key:"initialize",value:function(t){this.lifePan.a===1/0?t.life=1/0:t.life=this.lifePan.getValue()}}]),it);function it(e,i,a){t(this,it);var r=h(this,(it.__proto__||Object.getPrototypeOf(it)).call(this));return r.lifePan=l.setSpanValue(e,i,a),r.name="Life",r}var at=(r(rt,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),rt);function rt(){t(this,rt),this.vector=new U(0,0),this.random=0,this.crossType="dead",this.alert=!0}var nt=(o(st,at),r(st,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),st);function st(e,i){t(this,st);var a=h(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return a.x=e,a.y=i,a}var ot=(o(ht,J),r(ht,[{key:"reset",value:function(t){this.zone=E.initValue(t,new nt)}},{key:"initialize",value:function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y}}]),ht);function ht(e){t(this,ht);var i=h(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this));return i.zone=E.initValue(e,new nt),i.name="Position",i}var lt=(o(ut,J),r(ut,[{key:"reset",value:function(t,e,i){this.rPan=l.setSpanValue(t),this.thaPan=l.setSpanValue(e),this.type=E.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(t){if("p"===this.type||"P"===this.type||"polar"===this.type){var e=new q(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*i.PI_180);t.v.x=e.getX(),t.v.y=e.getY()}else t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue())}}]),ut);function ut(e,i,a){t(this,ut);var r=h(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this));return r.rPan=l.setSpanValue(e),r.thaPan=l.setSpanValue(i),r.type=E.initValue(a,"vector"),r.name="Velocity",r}var ct=(o(dt,J),r(dt,[{key:"initialize",value:function(t){t.mass=this.massPan.getValue()}}]),dt);function dt(e,i,a){t(this,dt);var r=h(this,(dt.__proto__||Object.getPrototypeOf(dt)).call(this));return r.massPan=l.setSpanValue(e,i,a),r.name="Mass",r}var pt=(o(ft,J),r(ft,[{key:"reset",value:function(t,e,i){this.radius=l.setSpanValue(t,e,i)}},{key:"initialize",value:function(t){t.radius=this.radius.getValue(),t.data.oldRadius=t.radius}}]),ft);function ft(e,i,a){t(this,ft);var r=h(this,(ft.__proto__||Object.getPrototypeOf(ft)).call(this));return r.radius=l.setSpanValue(e,i,a),r.name="Radius",r}var yt=(o(vt,J),r(vt,[{key:"initialize",value:function(t){var e=this.image.getValue();t.body="string"==typeof e?{width:this.w,height:this.h,src:e,isInner:!0,inner:!0}:e}},{key:"setSpanValue",value:function(t){return t instanceof X?t:new X(t)}}]),vt);function vt(e,i,a){t(this,vt);var r=h(this,(vt.__proto__||Object.getPrototypeOf(vt)).call(this));return r.image=r.setSpanValue(e),r.w=E.initValue(i,20),r.h=E.initValue(a,r.w),r.name="Body",r}var gt=(r(mt,[{key:"reset",value:function(t,e){this.life=E.initValue(t,1/0),this.easing=F.getEasing(e)}},{key:"normalizeForce",value:function(t){return t.multiplyScalar(V.MEASURE)}},{key:"normalizeValue",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(t,e){if(this.age+=e,this.age>=this.life||this.dead)this.energy=0,this.dead=!0,this.destroy();else{var i=this.easing(t.age/t.life);this.energy=Math.max(1-i,0)}}},{key:"destroy",value:function(){for(var t=this.parents.length;t--;)this.parents[t].removeBehaviour(this);this.parents.length=0}}]),mt);function mt(e,i){t(this,mt),this.life=E.initValue(e,1/0),this.easing=F.getEasing(i),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+mt.id++,this.name="Behaviour"}gt.id=0;var bt=(o(_t,gt),r(_t,[{key:"reset",value:function(t,e,i,a){this.force=this.normalizeForce(new U(t,e)),i&&s(_t.prototype.__proto__||Object.getPrototypeOf(_t.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.a.add(this.force)}}]),_t);function _t(e,i,a,r){t(this,_t);var n=h(this,(_t.__proto__||Object.getPrototypeOf(_t)).call(this,a,r));return n.force=n.normalizeForce(new U(e,i)),n.name="Force",n}var xt=(o(kt,gt),r(kt,[{key:"reset",value:function(t,e,i,a,r){this.targetPosition=E.initValue(t,new U),this.radius=E.initValue(i,1e3),this.force=E.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new U,this.lengthSq=0,a&&s(kt.prototype.__proto__||Object.getPrototypeOf(kt.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))}}]),kt);function kt(e,i,a,r,n){t(this,kt);var s=h(this,(kt.__proto__||Object.getPrototypeOf(kt)).call(this,r,n));return s.targetPosition=E.initValue(e,new U),s.radius=E.initValue(a,1e3),s.force=E.initValue(s.normalizeValue(i),100),s.radiusSq=s.radius*s.radius,s.attractionForce=new U,s.lengthSq=0,s.name="Attraction",s}var Et=(o(Pt,gt),r(Pt,[{key:"reset",value:function(t,e,i,a,r){this.panFoce=new U(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,a&&s(Pt.prototype.__proto__||Object.getPrototypeOf(Pt.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.data.time=0}},{key:"applyBehaviour",value:function(t,e,a){this.calculate(t,e,a),t.data.time+=e,t.data.time>=this.delay&&(t.a.addXY(i.randomAToB(-this.panFoce.x,this.panFoce.x),i.randomAToB(-this.panFoce.y,this.panFoce.y)),t.data.time=0)}}]),Pt);function Pt(e,i,a,r,n){t(this,Pt);var s=h(this,(Pt.__proto__||Object.getPrototypeOf(Pt)).call(this,r,n));return s.reset(e,i,a),s.time=0,s.name="RandomDrift",s}var wt=(o(At,bt),r(At,[{key:"reset",value:function(t,e,i){s(At.prototype.__proto__||Object.getPrototypeOf(At.prototype),"reset",this).call(this,0,t,e,i)}}]),At);function At(e,i,a){t(this,At);var r=h(this,(At.__proto__||Object.getPrototypeOf(At)).call(this,0,e,i,a));return r.name="Gravity",r}var Tt=(o(Rt,gt),r(Rt,[{key:"reset",value:function(t,e,i,a,r){this.emitter=E.initValue(t,null),this.mass=E.initValue(e,!0),this.callback=E.initValue(i,null),this.collisionPool=[],this.delta=new U,a&&s(Rt.prototype.__proto__||Object.getPrototypeOf(Rt.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){var a=this.emitter?this.emitter.particles.slice(i):this.pool.slice(i),r=a.length,n=void 0,s=void 0,o=void 0,h=void 0,l=void 0,u=void 0,c=void 0;for(c=0;c<r;c++)if((n=a[c])!==t){this.delta.copy(n.p),this.delta.sub(t.p),s=this.delta.lengthSq();var d=t.radius+n.radius;s<=d*d&&(o=d-Math.sqrt(s),o+=.5,h=t.mass+n.mass,l=this.mass?n.mass/h:.5,u=this.mass?t.mass/h:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(o*-l)),n.p.add(this.delta.normalize().multiplyScalar(o*u)),this.callback&&this.callback(t,n))}}}]),Rt);function Rt(e,i,a,r,n){t(this,Rt);var s=h(this,(Rt.__proto__||Object.getPrototypeOf(Rt)).call(this,r,n));return s.reset(e,i,a),s.name="Collision",s}var Ot=(o(Ct,gt),r(Ct,[{key:"reset",value:function(t,e,i,a){this.zone=t,this.zone.crossType=E.initValue(e,"dead"),i&&s(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.zone.crossing(t)}}]),Ct);function Ct(e,i,a,r){t(this,Ct);var n=h(this,(Ct.__proto__||Object.getPrototypeOf(Ct)).call(this,a,r));return n.reset(e,i),n.name="CrossZone",n}var St=(o(It,gt),r(It,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(E.initValue(t,1)),this.b=l.setSpanValue(e),i&&s(It.prototype.__proto__||Object.getPrototypeOf(It.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.alphaA=this.a.getValue(),this.same?t.data.alphaB=t.data.alphaA:t.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.alpha=t.data.alphaB+(t.data.alphaA-t.data.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)}}]),It);function It(e,i,a,r){t(this,It);var n=h(this,(It.__proto__||Object.getPrototypeOf(It)).call(this,a,r));return n.reset(e,i),n.name="Alpha",n}var Bt=(o(Vt,gt),r(Vt,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(E.initValue(t,1)),this.b=l.setSpanValue(e),i&&s(Vt.prototype.__proto__||Object.getPrototypeOf(Vt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.scaleA=this.a.getValue(),t.data.oldRadius=t.radius,t.data.scaleB=this.same?t.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.scale=t.data.scaleB+(t.data.scaleA-t.data.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.data.oldRadius*t.scale}}]),Vt);function Vt(e,i,a,r){t(this,Vt);var n=h(this,(Vt.__proto__||Object.getPrototypeOf(Vt)).call(this,a,r));return n.reset(e,i),n.name="Scale",n}var Mt=(o(Dt,gt),r(Dt,[{key:"reset",value:function(t,e,i,a,r){this.same=null==e,this.a=l.setSpanValue(E.initValue(t,"Velocity")),this.b=l.setSpanValue(E.initValue(e,0)),this.style=E.initValue(i,"to"),a&&s(Dt.prototype.__proto__||Object.getPrototypeOf(Dt.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.rotation=this.a.getValue(),t.data.rotationA=this.a.getValue(),this.same||(t.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.same?"V"!==this.a.a&&"Velocity"!==this.a.a&&"v"!==this.a.a||(t.rotation=t.getDirection()):"to"===this.style||"TO"===this.style||"_"===this.style?t.rotation+=t.data.rotationB+(t.data.rotationA-t.data.rotationB)*this.energy:t.rotation+=t.data.rotationB}}]),Dt);function Dt(e,i,a,r,n){t(this,Dt);var s=h(this,(Dt.__proto__||Object.getPrototypeOf(Dt)).call(this,r,n));return s.reset(e,i,a),s.name="Rotate",s}var Lt=(o(Ft,gt),r(Ft,[{key:"reset",value:function(t,e,i,a){this.a=X.createArraySpan(t),this.b=X.createArraySpan(e),i&&s(Ft.prototype.__proto__||Object.getPrototypeOf(Ft.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.color=this.a.getValue(),t.data.colorA=H.hexToRgb(t.color),this.b&&(t.data.colorB=H.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(t,e,i){this.b?(this.calculate(t,e,i),t.rgb.r=t.data.colorB.r+(t.data.colorA.r-t.data.colorB.r)*this.energy,t.rgb.g=t.data.colorB.g+(t.data.colorA.g-t.data.colorB.g)*this.energy,t.rgb.b=t.data.colorB.b+(t.data.colorA.b-t.data.colorB.b)*this.energy,t.rgb.r=Math.floor(t.rgb.r),t.rgb.g=Math.floor(t.rgb.g),t.rgb.b=Math.floor(t.rgb.b)):(t.rgb.r=t.data.colorA.r,t.rgb.g=t.data.colorA.g,t.rgb.b=t.data.colorA.b)}}]),Ft);function Ft(e,i,a,r){t(this,Ft);var n=h(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).call(this,a,r));return n.reset(e,i),n.name="Color",n}var Ut="changing",jt=(o(zt,gt),r(zt,[{key:"setAngleAndForce",value:function(t,e){this.force=Ut,this.angle=i.PI/2,"right"===t?this.angle=i.PI/2:"left"===t?this.angle=-i.PI/2:"random"===t?this.angle="random":t instanceof l?(this.angle="span",this.span=t):t&&(this.angle=t),"changing"===String(e).toLowerCase()||"chang"===String(e).toLowerCase()||"auto"===String(e).toLowerCase()?this.force=Ut:e&&(this.force=e)}},{key:"reset",value:function(t,e,a,r){this.angle=i.PI/2,this.setAngleAndForce(t,e),a&&s(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){"random"===this.angle?t.data.cangle=i.randomAToB(-i.PI,i.PI):"span"===this.angle&&(t.data.cangle=this.span.getValue()),t.data.cyclone=new U(0,0)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i);var a=void 0,r=t.v.getGradient();"random"===this.angle||"span"===this.angle?r+=t.data.cangle:r+=this.angle,a=this.force===Ut?t.v.length()/100:this.force,t.data.cyclone.x=a*Math.cos(r),t.data.cyclone.y=a*Math.sin(r),t.data.cyclone=this.normalizeForce(t.data.cyclone),t.a.add(t.data.cyclone)}}]),zt);function zt(e,i,a,r){t(this,zt);var n=h(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,a,r));return n.setAngleAndForce(e,i),n.name="Cyclone",n}var Nt=(o(Ht,xt),r(Ht,[{key:"reset",value:function(t,e,i,a,r){s(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"reset",this).call(this,t,e,i,a,r),this.force*=-1}}]),Ht);function Ht(e,i,a,r,n){t(this,Ht);var s=h(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,e,i,a,r,n));return s.force*=-1,s.name="Repulsion",s}var qt=(o(Gt,gt),r(Gt,[{key:"reset",value:function(t,e,i,a){this.distanceVec=new U,this.centerPoint=E.initValue(t,new U),this.force=E.initValue(this.normalizeValue(e),100),i&&s(Gt.prototype.__proto__||Object.getPrototypeOf(Gt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(t,e){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var i=this.distanceVec.lengthSq();if(0!==i){var a=this.distanceVec.length(),r=this.force*e/(i*a);t.v.x+=r*this.distanceVec.x,t.v.y+=r*this.distanceVec.y}}}]),Gt);function Gt(e,i,a,r){t(this,Gt);var n=h(this,(Gt.__proto__||Object.getPrototypeOf(Gt)).call(this,a,r));return n.distanceVec=new U,n.centerPoint=E.initValue(e,new U),n.force=E.initValue(n.normalizeValue(i),100),n.name="GravityWell",n}var Yt={initialize:function(t,e,i){var a=i.length,r=void 0;for(r=0;r<a;r++)i[r]instanceof J?i[r].init(t,e):this.init(t,e,i[r]);this.bindEmitter(t,e)},init:function(t,e,i){E.setProp(e,i),E.setVectorVal(e,i)},bindEmitter:function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(i.degreeTransform(t.rotation)))}},Xt=(o(Wt,z),r(Wt,[{key:"emit",value:function(t,e){this.stoped=!1,this.emitTime=0,this.totalTime=E.initValue(t,1/0),!0===e||"life"===e||"destroy"===e?this.life="once"===t?1:this.totalTime:isNaN(e)||(this.life=e),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(t){var e=this.stoped,i=this.emitTime,a=this.totalTime;for(this.stoped=!1,this.emitTime=0,this.totalTime=t,this.rate.init();.0167<t;)t-=.0167,this.update(.0167);this.stoped=e,this.emitTime=i+Math.max(t,0),this.totalTime=a}},{key:"removeAllParticles",value:function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0}},{key:"addSelfInitialize",value:function(t){t.init?t.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=e.length;a--;)this.initializes.push(e[a])}},{key:"removeInitialize",value:function(t){var e=this.initializes.indexOf(t);-1<e&&this.initializes.splice(e,1)}},{key:"removeAllInitializers",value:function(){E.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=arguments.length;a--;){var r=e[a];this.behaviours.push(r),r.parents&&r.parents.push(this)}}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);return this.behaviours.splice(e,1),t.parents&&(e=t.parents.indexOf(t),t.parents.splice(e,1)),e}},{key:"removeAllBehaviours",value:function(){E.emptyArray(this.behaviours)}},{key:"update",value:function(t){this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t)}},{key:"integrate",value:function(t){if(this.parent){var e=1-this.damping;this.parent.integrator.calculate(this,t,e);var i=void 0,a=void 0;for(i=this.particles.length-1;0<=i;i--)(a=this.particles[i]).update(t,i),this.parent.integrator.calculate(a,t,e),this.dispatch("PARTICLE_UPDATE",a),a.dead&&(this.dispatch("PARTICLE_DEAD",a),this.parent.pool.expire(a),this.particles.splice(i,1))}}},{key:"dispatch",value:function(t,e){this.parent&&this.parent.dispatchEvent(t,e),this.bindEvent&&this.dispatchEvent(t,e)}},{key:"emitting",value:function(t){if("once"===this.totalTime){var e=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),e=0;e<i;e++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=t,this.emitTime<this.totalTime){var a=this.rate.getValue(t),r=void 0;for(0<a&&(this.emitSpeed=a),r=0;r<a;r++)this.createParticle()}}},{key:"createParticle",value:function(t,e){var i=this.parent.pool.get(z);return this.setupParticle(i,t,e),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(t,e,i){var a=this.initializes,r=this.behaviours;e&&(a=E.toArray(e)),i&&(r=E.toArray(i)),t.reset(),Yt.initialize(this,t,a),t.addBehaviours(r),(t.parent=this).particles.push(t)}},{key:"remove",value:function(){this.stop(),E.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),Wt);function Wt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t(this,Wt);var i=h(this,(Wt.__proto__||Object.getPrototypeOf(Wt)).call(this,e));return i.particles=[],i.behaviours=[],i.initializes=[],i.emitTime=0,i.emitSpeed=0,i.totalTime=-1,i.damping=.006,i.bindEmitter=!0,i.rate=new Q(1,.1),i.name="Emitter",i.id=w.id(i.name),i}C.bind(Xt);var Zt=(o($t,Xt),r($t,[{key:"addSelfBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=void 0,r=e.length;for(a=0;a<r;a++){var n=e[a];this.selfBehaviours.push(n),n.initialize(this)}}},{key:"removeSelfBehaviour",value:function(t){var e=this.selfBehaviours.indexOf(t);-1<e&&this.selfBehaviours.splice(e,1)}},{key:"update",value:function(t){if(s($t.prototype.__proto__||Object.getPrototypeOf($t.prototype),"update",this).call(this,t),!this.sleep){var e=this.selfBehaviours.length,i=void 0;for(i=0;i<e;i++)this.selfBehaviours[i].applyBehaviour(this,t,i)}}}]),$t);function $t(e){t(this,$t);var i=h(this,($t.__proto__||Object.getPrototypeOf($t)).call(this,e));return i.selfBehaviours=[],i}var Qt=(o(Kt,Xt),r(Kt,[{key:"initEventHandler",value:function(){var t=this;this.mousemoveHandler=function(e){return t.mousemove.call(t,e)},this.mousedownHandler=function(e){return t.mousedown.call(t,e)},this.mouseupHandler=function(e){return t.mouseup.call(t,e)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(t){t.layerX||0===t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):!t.offsetX&&0!==t.offsetX||(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&s(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){s(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),Kt);function Kt(e,i,a){t(this,Kt);var r=h(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,a));return r.mouseTarget=E.initValue(e,window),r.ease=E.initValue(i,.7),r._allowEmitting=!1,r.initEventHandler(),r}var Jt=(r(te,[{key:"setStroke",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:"#000000",a=1<arguments.length&&void 0!==e?e:1;this.stroke={color:i,thinkness:a}}},{key:"initHandler",value:function(){var t=this;this._protonUpdateHandler=function(){t.onProtonUpdate.call(t)},this._protonUpdateAfterHandler=function(){t.onProtonUpdateAfter.call(t)},this._emitterAddedHandler=function(e){t.onEmitterAdded.call(t,e)},this._emitterRemovedHandler=function(e){t.onEmitterRemoved.call(t,e)},this._particleCreatedHandler=function(e){t.onParticleCreated.call(t,e)},this._particleUpdateHandler=function(e){t.onParticleUpdate.call(t,e)},this._particleDeadHandler=function(e){t.onParticleDead.call(t,e)}}},{key:"init",value:function(t){(this.parent=t).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),t.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),t.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),t.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),t.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),t.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),t.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),te);function te(e,i){t(this,te),this.pool=new A,this.element=e,this.stroke=i,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var ee=(o(ie,Jt),r(ie,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):t.color=t.color||"#ff0000"}},{key:"onParticleUpdate",value:function(t){t.body?t.body instanceof Image&&this.drawImage(t):this.drawCircle(t)}},{key:"onParticleDead",value:function(t){t.body=null}},{key:"addImg2Body",value:function(t,e){e.body=t}},{key:"drawImage",value:function(t){var e=t.body.width*t.scale|0,a=t.body.height*t.scale|0,r=t.p.x-e/2,n=t.p.y-a/2;if(t.color){t.data.buffer||(t.data.buffer=this.createBuffer(t.body));var s=t.data.buffer.getContext("2d");s.clearRect(0,0,t.data.buffer.width,t.data.buffer.height),s.globalAlpha=t.alpha,s.drawImage(t.body,0,0),s.globalCompositeOperation="source-atop",s.fillStyle=H.rgbToHex(t.rgb),s.fillRect(0,0,t.data.buffer.width,t.data.buffer.height),s.globalCompositeOperation="source-over",s.globalAlpha=1,this.context.drawImage(t.data.buffer,0,0,t.data.buffer.width,t.data.buffer.height,r,n,e,a)}else this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(i.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.body,0,0,t.body.width,t.body.height,r,n,e,a),this.context.globalAlpha=1,this.context.restore()}},{key:"drawCircle",value:function(t){t.rgb?this.context.fillStyle="rgba("+t.rgb.r+","+t.rgb.g+","+t.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(t){if(t instanceof Image){var e=t.width+"_"+t.height,i=this.bufferCache[e];return i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,this.bufferCache[e]=i),i}}}]),ie);function ie(e){t(this,ie);var i=h(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,e));return i.stroke=null,i.context=i.element.getContext("2d"),i.bufferCache={},i.name="CanvasRenderer",i}var ae=(o(re,Jt),r(re,[{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):(t.body=this.pool.get(this.circleConf,t),this.element.appendChild(t.body))}},{key:"onParticleUpdate",value:function(t){this.bodyReady(t)&&(this.transform3d?v.transform3d(t.body,t.p.x,t.p.y,t.scale,t.rotation):v.transform(t.body,t.p.x,t.p.y,t.scale,t.rotation),t.body.style.opacity=t.alpha,t.body.isCircle&&(t.body.style.backgroundColor=t.color||"#ff0000"))}},{key:"onParticleDead",value:function(t){this.bodyReady(t)&&(this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null)}},{key:"bodyReady",value:function(t){return"object"===a(t.body)&&t.body&&!t.body.isInner}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=this.pool.get(t,e),v.resize(e.body,t.width,t.height),this.element.appendChild(e.body))}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t,e)}},{key:"createCircle",value:function(t){var e=v.createDiv(t.id+"_dom",2*t.radius,2*t.radius);return e.style.borderRadius=t.radius+"px",this.stroke&&(e.style.borderColor=this.stroke.color,e.style.borderWidth=this.stroke.thinkness+"px"),e.isCircle=!0,e}},{key:"createSprite",value:function(t,e){var i="string"==typeof t?t:t.src,a=v.createDiv(e.id+"_dom",t.width,t.height);return a.style.backgroundImage="url("+i+")",a}}]),re);function re(e){t(this,re);var i=h(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,e));return i.stroke=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.addImg2Body=i.addImg2Body.bind(i),i.transform3d=!1,i.name="DomRenderer",i}var ne=(o(se,Jt),r(se,[{key:"onParticleCreated",value:function(t){t.body?this.createSprite(t):this.createCircle(t),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){t.body&&(t.body.x=t.p.x,t.body.y=t.p.y,t.body.alpha=t.alpha,t.body.scaleX=t.body.scaleY=t.scale,t.body.rotation=t.rotation)}},{key:"onParticleDead",value:function(t){t.body&&(t.body.parent&&t.body.parent.removeChild(t.body),this.pool.expire(t.body),t.body=null),t.graphics&&this.pool.expire(t.graphics)}},{key:"createSprite",value:function(t){t.body=this.pool.get(t.body),t.body.parent||t.body.image&&(t.body.regX=t.body.image.width/2,t.body.regY=t.body.image.height/2)}},{key:"createCircle",value:function(t){var e=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?e.beginStroke(this.stroke):e.beginStroke("#000000")),e.beginFill(t.color||"#ff0000").drawCircle(0,0,t.radius);var i=this.pool.get(createjs.Shape,[e]);t.body=i,t.graphics=e}}]),se);function se(e,i){t(this,se);var a=h(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,e));return a.stroke=i,a.name="EaselRenderer",a}var oe=(o(he,Jt),r(he,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"createImageData",value:function(t){this.rectangle=t||new Z(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)}},{key:"setPixel",value:function(t,e,i,a){var r=a.rgb;if(!(e<0||e>this.element.width||i<0||i>this.elementwidth)){var n=4*((i>>0)*t.width+(e>>0));t.data[n]=r.r,t.data[1+n]=r.g,t.data[2+n]=r.b,t.data[3+n]=255*a.alpha}}},{key:"onParticleDead",value:function(){}}]),he);function he(e,i){t(this,he);var a=h(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,e));return a.context=a.element.getContext("2d"),a.imageData=null,a.rectangle=null,a.rectangle=i,a.createImageData(i),a.name="PixelRenderer",a}var le=void 0,ue=(o(ce,Jt),r(ce,[{key:"setPIXI",value:function(t){try{le=t||{Sprite:{}},this.createFromImage=le.Sprite.from||le.Sprite.fromImage}catch(t){}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.body?t.body=this.pool.get(t.body,t):t.body=this.pool.get(this.circleConf,t),this.blendMode&&(t.body.blendMode=this.blendMode),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){this.transform(t,t.body),!0!==this.setColor&&!0!==this.color||(t.body.tint=H.getHex16FromParticle(t))}},{key:"onParticleDead",value:function(t){this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null}},{key:"destroy",value:function(t){s(ce.prototype.__proto__||Object.getPrototypeOf(ce.prototype),"destroy",this).call(this),this.pool.destroy();for(var e=t.length;e--;){var i=t[e];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(t,e){e.x=t.p.x,e.y=t.p.y,e.alpha=t.alpha,e.scale.x=t.scale,e.scale.y=t.scale,e.rotation=t.rotation*i.PI_180}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t)}},{key:"createSprite",value:function(t){var e=t.isInner?this.createFromImage(t.src):new le.Sprite(t);return e.anchor.x=.5,e.anchor.y=.5,e}},{key:"createCircle",value:function(t){var e=new le.Graphics;if(this.stroke){var i=this.stroke instanceof String?this.stroke:0;e.beginStroke(i)}return e.beginFill(t.color||36077),e.drawCircle(0,0,t.radius),e.endFill(),e}}]),ce);function ce(e,i){t(this,ce);var a=h(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,e));return a.stroke=i,a.color=!1,a.setColor=!1,a.blendMode=null,a.pool.create=function(t,e){return a.createBody(t,e)},a.setPIXI(window.PIXI),a.name="PixiRenderer",a}var de=(r(pe,[{key:"set",value:function(t,e){0===e?Y.set(t,this.mats[0]):Y.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)}},{key:"push",value:function(t){0===this.size?Y.set(t,this.mats[0]):Y.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),pe);function pe(){t(this,pe),this.mats=[];for(var e=this.size=0;e<20;e++)this.mats.push(Y.create([0,0,0,0,0,0,0,0,0]))}var fe=(o(ye,Jt),r(ye,[{key:"init",value:function(t){s(ye.prototype.__proto__||Object.getPrototypeOf(ye.prototype),"init",this).call(this,t),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e}},{key:"setMaxRadius",value:function(t){this.circleCanvasURL=this.createCircle(t)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n")}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n")}},{key:"initVar",value:function(){this.mstack=new de,this.umat=Y.create([2,0,1,0,-2,0,-1,1,1]),this.smat=Y.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(t){this.gl.blendEquation(this.gl[t])}},{key:"blendFunc",value:function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])}},{key:"getShader",value:function(t,e,i){var a=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return t.shaderSource(a,e),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS)?a:(alert(t.getShaderInfoLog(a)),null)}},{key:"initShaders",value:function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var t=void 0;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);var e=void 0,i=[];for(e=0;e<100;e++)i.push(e);for(t=new Uint16Array(i),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),i=[],e=0;e<100;e++)i.push(e,e+1,e+2);t=new Uint16Array(i),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(t){this.circleCanvasRadius=c(E.initValue(t,32));var e=v.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),i=e.getContext("2d");return i.beginPath(),i.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),i.closePath(),i.fillStyle="#FFF",i.fill(),e.toDataURL()}},{key:"drawImg2Canvas",value:function(t){var e=t.body.width,i=t.body.height,a=c(t.body.width),r=c(t.body.height),n=t.body.width/a,s=t.body.height/r;this.texturebuffers[t.data.src]||(this.texturebuffers[t.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.data.texture=this.texturebuffers[t.data.src][0],t.data.vcBuffer=this.texturebuffers[t.data.src][1],t.data.tcBuffer=this.texturebuffers[t.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,s,s,s]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,i,e,i]),this.gl.STATIC_DRAW);var o=t.data.canvas.getContext("2d").getImageData(0,0,a,r);this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.data.textureLoaded=!0,t.data.textureWidth=e,t.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.data.textureLoaded=!1,t.data.tmat=Y.create(),t.data.tmat[8]=1,t.data.imat=Y.create(),t.data.imat[8]=1,t.body?x(t.body,this.addImg2Body,t):(x(this.circleCanvasURL,this.addImg2Body,t),t.data.oldScale=t.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=t,e.data.src=t.src,e.data.canvas=k(t),e.data.oldScale=1,this.drawImg2Canvas(e))}},{key:"onParticleUpdate",value:function(t){t.data.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.rgb.r/255,t.rgb.g/255,t.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(t){var e=d(-t.data.textureWidth/2,-t.data.textureHeight/2),a=d(t.p.x,t.p.y),r=t.rotation*i.PI_180,n=p(r),s=t.scale*t.data.oldScale,o=f(s,s),h=y(e,o);h=y(h,n),h=y(h,a),Y.inverse(h,t.data.imat),h[2]=t.alpha,this.mstack.push(h)}}]),ye);function ye(e){t(this,ye);var i=h(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,e));return i.gl=i.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),i.gl||alert("Sorry your browser do not suppest WebGL!"),i.initVar(),i.setMaxRadius(),i.initShaders(),i.initBuffers(),i.gl.blendEquation(i.gl.FUNC_ADD),i.gl.blendFunc(i.gl.SRC_ALPHA,i.gl.ONE_MINUS_SRC_ALPHA),i.gl.enable(i.gl.BLEND),i.addImg2Body=i.addImg2Body.bind(i),i.name="WebGLRenderer",i}var ve=(o(ge,Jt),ge);function ge(e){t(this,ge);var i=h(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this,e));return i.name="CustomRenderer",i}var me=(o(be,at),r(be,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(t,e){var i=this.dy,a=-this.dx;return 0<(i*t+a*e+this.dot)*(0==a?1:a)}},{key:"getDistance",value:function(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(t){var e=t.getGradient(),i=2*(this.getGradient()-e),a=t.x,r=t.y;return t.x=a*Math.cos(i)-r*Math.sin(i),t.y=a*Math.sin(i)+r*Math.cos(i),t}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(t){if(Math.abs(this.getGradient())<=i.PI/4){if(t.p.x<=this.maxx&&t.p.x>=this.minx)return!0}else if(t.p.y<=this.maxy&&t.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(t){if("dead"===this.crossType)if(">"===this.direction||"R"===this.direction||"right"===this.direction||"down"===this.direction){if(!this.rangeOut(t))return;this.getDirection(t.p.x,t.p.y)&&(t.dead=!0)}else{if(!this.rangeOut(t))return;this.getDirection(t.p.x,t.p.y)||(t.dead=!0)}else if("bound"===this.crossType){if(!this.rangeOut(t))return;this.getDistance(t.p.x,t.p.y)<=t.radius&&(0===this.dx?t.v.x*=-1:0===this.dy?t.v.y*=-1:this.getSymmetric(t.v))}else"cross"===this.crossType&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),be);function be(e,i,a,r,n){t(this,be);var s=h(this,(be.__proto__||Object.getPrototypeOf(be)).call(this));return 0<=a-e?(s.x1=e,s.y1=i,s.x2=a,s.y2=r):(s.x1=a,s.y1=r,s.x2=e,s.y2=i),s.dx=s.x2-s.x1,s.dy=s.y2-s.y1,s.minx=Math.min(s.x1,s.x2),s.miny=Math.min(s.y1,s.y2),s.maxx=Math.max(s.x1,s.x2),s.maxy=Math.max(s.y1,s.y2),s.dot=s.x2*s.y1-s.x1*s.y2,s.xxyy=s.dx*s.dx+s.dy*s.dy,s.gradient=s.getGradient(),s.length=s.getLength(),s.direction=E.initValue(n,">"),s}var _e=(o(xe,at),r(xe,[{key:"getPosition",value:function(){return this.angle=i.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(t,e){this.center.x=t,this.center.y=e}},{key:"crossing",value:function(t){var e=t.p.distanceTo(this.center);"dead"===this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"===this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"===this.crossType&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(t){var e=t.v.getGradient(),i=2*(this.getGradient(t)-e),a=t.v.x,r=t.v.y;t.v.x=a*Math.cos(i)-r*Math.sin(i),t.v.y=a*Math.sin(i)+r*Math.cos(i)}},{key:"getGradient",value:function(t){return-i.PI_2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)}}]),xe);function xe(e,i,a){t(this,xe);var r=h(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this));return r.x=e,r.y=i,r.radius=a,r.angle=0,r.center={x:e,y:i},r}var ke=(o(Ee,at),r(Ee,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(t){"dead"===this.crossType?((t.p.x+t.radius<this.x||t.p.x-t.radius>this.x+this.width)&&(t.dead=!0),(t.p.y+t.radius<this.y||t.p.y-t.radius>this.y+this.height)&&(t.dead=!0)):"bound"===this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"===this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&0<=t.v.x&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&0<=t.v.y&&(t.p.y=this.y-t.radius))}}]),Ee);function Ee(e,i,a,r){t(this,Ee);var n=h(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this));return n.x=e,n.y=i,n.width=a,n.height=r,n}var Pe=(o(we,at),r(we,[{key:"reset",value:function(t,e,i,a){this.imageData=t,this.x=E.initValue(e,0),this.y=E.initValue(i,0),this.d=E.initValue(a,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){var t=void 0,e=void 0,i=this.imageData.width,a=this.imageData.height;for(t=0;t<i;t+=this.d)for(e=0;e<a;e+=this.d){var r=4*((e>>0)*i+(t>>0));0<this.imageData.data[3+r]&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(t,e){var i=4*((e>>0)*this.imageData.width+(t>>0));return 0<this.imageData.data[3+i]}},{key:"getPosition",value:function(){var t=E.getRandFromArray(this.vectors);return this.vector.copy(t)}},{key:"getColor",value:function(t,e){t-=this.x;var i=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[i],g:this.imageData.data[1+i],b:this.imageData.data[2+i],a:this.imageData.data[3+i]}}},{key:"crossing",value:function(t){"dead"===this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"===this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())}}]),we);function we(e,i,a,r){t(this,we);var n=h(this,(we.__proto__||Object.getPrototypeOf(we)).call(this));return n.reset(e,i,a,r),n}var Ae={addEventListener:function(t,e){t.addEventListener("PROTON_UPDATE_AFTER",(function(){return e()}))},getStyle:function(t){var e=H.hexToRgb(0<arguments.length&&void 0!==t?t:"#ff0000");return"rgba("+e.r+", "+e.g+", "+e.b+", 0.5)"},drawZone:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,(function(){a&&r.clearRect(0,0,e.width,e.height),i instanceof nt?(r.beginPath(),r.fillStyle=n,r.arc(i.x,i.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()):i instanceof me?(r.beginPath(),r.strokeStyle=n,r.moveTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.stroke(),r.closePath()):i instanceof ke?(r.beginPath(),r.strokeStyle=n,r.drawRect(i.x,i.y,i.width,i.height),r.stroke(),r.closePath()):i instanceof _e&&(r.beginPath(),r.strokeStyle=n,r.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),r.stroke(),r.closePath())}))},drawEmitter:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,(function(){a&&r.clearRect(0,0,e.width,e.height),r.beginPath(),r.fillStyle=n,r.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()}))}};return V.Particle=V.P=z,V.Pool=A,V.Util=E,V.ColorUtil=H,V.MathUtil=i,V.Vector2D=V.Vector=U,V.Polar2D=V.Polar=q,V.ArraySpan=X,V.Rectangle=Z,V.Rate=Q,V.ease=F,V.Span=l,V.Mat3=Y,V.getSpan=function(t,e,i){return new l(t,e,i)},V.createArraySpan=X.createArraySpan,V.Initialize=V.Init=J,V.Life=V.L=et,V.Position=V.P=ot,V.Velocity=V.V=lt,V.Mass=V.M=ct,V.Radius=V.R=pt,V.Body=V.B=yt,V.Behaviour=gt,V.Force=V.F=bt,V.Attraction=V.A=xt,V.RandomDrift=V.RD=Et,V.Gravity=V.G=wt,V.Collision=Tt,V.CrossZone=Ot,V.Alpha=V.A=St,V.Scale=V.S=Bt,V.Rotate=Mt,V.Color=Lt,V.Repulsion=Nt,V.Cyclone=jt,V.GravityWell=qt,V.Emitter=Xt,V.BehaviourEmitter=Zt,V.FollowEmitter=Qt,V.Zone=at,V.LineZone=me,V.CircleZone=_e,V.PointZone=nt,V.RectZone=ke,V.ImageZone=Pe,V.CanvasRenderer=ee,V.DomRenderer=ae,V.EaselRenderer=ne,V.PixiRenderer=ue,V.PixelRenderer=oe,V.WebGLRenderer=V.WebGlRenderer=fe,V.CustomRenderer=ve,V.Debug=Ae,E.assign(V,F),V}))}}]);
//# sourceMappingURL=login.b72910b3.js.map